(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{103:function(e,t,n){},222:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(22),i=n.n(a),s=(n(103),n(64)),o=n(7),l=n(98),d=n(17),j=n.n(d),u=n(25),h=n(11),b=n(224),x=n(225),O=n(93),f=n(231),p=n(226),v=n(227),m=n(2),w={container:{margin:"30px 0"},row:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px 0"}},y=function(e){var t=e.shortenLink,n=e.Error,c=Object(r.useState)(""),a=Object(h.a)(c,2),i=a[0],s=a[1],o=Object(r.useState)(""),l=Object(h.a)(o,2),d=l[0],j=l[1];return Object(m.jsxs)(b.a,{style:w.container,fluid:!0,children:[Object(m.jsx)(x.a,{style:w.row,children:Object(m.jsx)(O.a,{xs:10,children:Object(m.jsxs)(f.a,{children:[Object(m.jsxs)(f.a.Group,{controlId:"formBasicEmail",children:[Object(m.jsx)(f.a.Control,{type:"text",placeholder:"Full URL",value:i,onChange:function(e){return s(e.target.value)},isInvalid:!!n.Full}),Object(m.jsx)(f.a.Control.Feedback,{type:"invalid",children:n.Full})]}),Object(m.jsxs)(f.a.Group,{controlId:"formBasicPassword",children:[Object(m.jsx)(f.a.Control,{type:"text",placeholder:"Custom short URL (Optional)",value:d,onChange:function(e){return j(e.target.value)},isInvalid:!!n.Short}),Object(m.jsx)(f.a.Control.Feedback,{type:"invalid",children:n.Short}),Object(m.jsx)(f.a.Text,{className:"text-muted",children:"If leave blank, a random url will be genereated"})]}),Object(m.jsx)(p.a,{variant:"success",onClick:function(){t(i,d),s(""),j("")},children:"Submit"})]})})}),Object(m.jsx)(x.a,{style:w.row,className:"d-none d-sm-flex",children:Object(m.jsx)(O.a,{xs:10,children:Object(m.jsxs)(v.a,{variant:"info",children:[Object(m.jsx)(v.a.Heading,{children:"Info about the services"}),"You will have to provide a Full link and a short link (optional). If no custom short link is provided. A random (1sWsDc-) will be genereated. Custom short link can only contain letters, numbers, dash, and underscore. Please Understand. Thank you",Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:" Check: You can see the graph of redirect (analytics)"}),Object(m.jsx)("li",{children:" Copy: Same functionality as Ctrl + C, so you have manually press Ctrl + C"}),Object(m.jsx)("li",{children:" X: Same as Delete. Please be more careful"})]})]})})})]})},g=n(228),k=n(230),C=n(94);var S=function(e){var t=e.redirects,n=Object(r.useState)({}),c=Object(h.a)(n,2),a=c[0],i=c[1];return Object(r.useEffect)((function(){var e={1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0};t.forEach((function(t){var n=parseInt(t.date.split("-")[1]);e[n]=e[n]+1})),i(e)}),[]),Object(m.jsx)(C.Line,{data:{labels:["January","February","March","April","May","June","July","August","September","October","November","December"],datasets:[{label:"# of redirect",data:Object.values(a)}]},width:400,height:350,options:{maintainAspectRatio:!1}})};var L=function(e){var t=e.OpenModal,n=e.closeModal,r=e.Data;return Object(m.jsxs)(k.a,{animation:!1,show:t,size:"lg","aria-labelledby":"contained-modal-title-vcenter",onHide:n,centered:!0,children:[Object(m.jsx)(k.a.Header,{closeButton:!0,children:Object(m.jsxs)(k.a.Title,{id:"contained-modal-title-vcenter",children:["Short URL: (",r.shortURL,") To (",r.fullURL,")"]})}),Object(m.jsx)(k.a.Body,{children:Object(m.jsx)(S,{redirects:r.redirects})}),Object(m.jsx)(k.a.Footer,{children:Object(m.jsx)(p.a,{onClick:n,children:"Close"})})]})};var F={container:{height:"100%",overflow:"auto",maxHeight:"60vh",margin:"30px 0"},action:{display:"flex"},btn:{padding:"0px 7px",margin:"0 2px"},column:{maxWidth:"200px",overflowX:"auto"}},R=function(e){var t=e.Links,n=e.onDelete,c=Object(r.useState)(!1),a=Object(h.a)(c,2),i=a[0],s=a[1],o=Object(r.useState)({}),l=Object(h.a)(o,2),d=l[0],j=l[1];return Object(m.jsxs)(b.a,{style:F.container,fluid:!0,children:[Object(m.jsx)(x.a,{children:Object(m.jsx)(O.a,{children:Object(m.jsxs)(g.a,{responsive:!0,children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{}),Object(m.jsx)("th",{children:"Full URL"}),Object(m.jsx)("th",{children:"Short URL"}),Object(m.jsx)("th",{children:"Redirected"}),Object(m.jsx)("th",{})]})}),Object(m.jsx)("tbody",{children:t?t.map((function(e,t){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:t+1}),Object(m.jsx)("td",{style:F.column,children:e.fullURL}),Object(m.jsx)("td",{children:e.shortURL}),Object(m.jsx)("td",{children:e.redirects?e.redirects.length:0}),Object(m.jsxs)("td",{style:F.action,children:[e.redirects&&e.redirects.length>0?Object(m.jsx)(p.a,{style:F.btn,variant:"secondary",onClick:function(){return function(e){s(!0),j(e)}(e)},children:"Check"}):null,Object(m.jsx)(p.a,{style:F.btn,variant:"secondary",onClick:function(){return t=e.shortURL,navigator.clipboard.writeText(window.location.host+"/"+t),void window.alert("Copied to Clipboard");var t},children:"Copy"}),Object(m.jsx)(p.a,{style:F.btn,variant:"secondary",onClick:function(){return n(e.id)},children:"X"})]})]},t)})):Object(m.jsx)("tr",{children:"No Data"})})]})})}),Object(m.jsx)(L,{Data:d,OpenModal:i,closeModal:function(){s(!1)}})]})},U=n(28),A=n.n(U),I=n(96),z=n(232),D=function(){return Object(m.jsx)(z.a,{bg:"dark",variant:"dark",children:Object(m.jsx)(z.a.Brand,{href:"/",children:"Short URL Services"})})},M={footer:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",padding:"15px 0",backgroundColor:"#343a40",color:"white"}},Z=function(){return Object(m.jsx)("div",{style:M.footer,children:"Juhuang Xue \xa9 2021"})};var E={container:{flexGrow:1,height:"100%"},row:{display:"flex",justifyContent:"center",alignItems:"center"}},N=function(){var e=Object(r.useState)([]),t=Object(h.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)({}),i=Object(h.a)(a,2),s=i[0],o=i[1];Object(r.useEffect)((function(){(function(){var e=Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("/api/shorts").then((function(e){var t=e.data;c(t.shorts),console.log(t.shorts)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var d=function(){var e=Object(u.a)(j.a.mark((function e(t,r){var a,i,s,d;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Object(I.validateShort)({Full:t,Short:r}),i=a.isValid,s=a.errors,i){e.next=5;break}o(s),e.next=9;break;case 5:return d={fullURL:t},r&&(d.shortURL=r),e.next=9,A.a.post("/api/shorts",d).then((function(e){var t=e.data;o({}),console.log(t),c([].concat(Object(l.a)(n),[t]))})).catch((function(e){console.log(e)}));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(u.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.delete("/api/shorts",{params:{id:t}}).then((function(e){200===e.status&&c(n.filter((function(e){return e.id!==t})))})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"Main",children:[Object(m.jsx)(D,{}),Object(m.jsx)(b.a,{style:E.container,fluid:!0,children:Object(m.jsxs)(x.a,{style:E.row,children:[Object(m.jsx)(O.a,{xs:12,md:6,children:Object(m.jsx)(y,{shortenLink:d,Error:s})}),Object(m.jsx)(O.a,{xs:12,md:6,children:Object(m.jsx)(R,{Links:n,onDelete:f})})]})}),Object(m.jsx)(Z,{})]})},B=n(229);var T=function(){var e=Object(o.f)().short,t=Object(r.useState)(!1),n=Object(h.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(!1),s=Object(h.a)(i,2),l=s[0],d=s[1];Object(r.useEffect)((function(){a(!0),function(){var t=Object(u.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.a.get("/api/shorts/".concat(e)).then((function(e){var t=e.data;t.redirect.includes("http")||t.redirect.includes("https")?window.location=t.redirect:window.location="//"+t.redirect,a(!1)})).catch((function(e){a(!1),d(!0),console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[]);var f={container:{width:"100vw",height:"100vh"},row:{width:"100%",height:"100%"},col:{display:"flex",justifyContent:"center",alignItems:"center"}};return Object(m.jsx)(b.a,{style:f.container,children:Object(m.jsx)(x.a,{style:f.row,children:Object(m.jsx)(O.a,{style:f.col,children:c?Object(m.jsx)(B.a,{animation:"border",role:"status",children:Object(m.jsx)("span",{className:"sr-only",children:"Loading..."})}):l?Object(m.jsx)("div",{children:"Not Found"}):""})})})};var J=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(s.a,{children:Object(m.jsxs)(o.c,{children:[Object(m.jsx)(o.a,{path:"/",exact:!0,component:N}),Object(m.jsx)(o.a,{path:"/:short",component:T})]})})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,233)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))};i.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(J,{})}),document.getElementById("root")),P()},96:function(e,t){var n=/^[a-zA-Z0-9-_]+$/,r=/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/;t.validateShort=function(e){if(!(Object.keys(e).length<=0)){var t={};return e.Full?e.Full.match(r)||(t.Full="Please enter a valid url link"):t.Full="URL is required to shorten. URL cannot be empty",e.Short&&e.Short.length<6?t.Short="Shorten have to be short but cannot be too short. Minimum 6 characters including dash and underscore":e.Short&&!e.Short.match(n)&&(t.Short="Shorten url can only contain letters, numbers, dash, and underscore"),{errors:t,isValid:Object.keys(t).length<=0}}}}},[[222,1,2]]]);
//# sourceMappingURL=main.305d002b.chunk.js.map